# ADD STUFF HERE!
import util.key_rotator as keys
import util.stormglass
import matplotlib.pyplot as plt
from datetime import datetime
import pytz
import util.nogo as nogo
import util.locations as locations
import util.parse_windycom
import util.interweave_data
# import util.windycom_input
import json

# CONFIGURATION
# latlong = (35.346656, -117.809655)
# latlong = (38.970604, -80.220575)
# latitude = latlong[0]
# longitude = latlong[1]

#************************************#
file_name = "./json_files/10-23-24.json"
generate_new_data = True
location = locations.LaunchSite.FAR
#************************************#

key_rotator = keys.APIKeyRotator("./Wind-Model/programdata/KEY_ROTATE_META.txt", "./Wind-Model/programdata/API_KEYS.txt")


def utc_datetime(utc_string):
    return datetime.strptime(utc_string, "%Y-%m-%dT%H:%M:%S%z")
    
tz = pytz.timezone('US/Central')


def prettytime(dt: datetime):
    s = ""
    hs = dt.hour
    if(dt.hour < 10):
        hs = "0" + str(hs)

    s = s + str(hs) + ":00"
    return s

def prettytime_full(dt: datetime):
    s = ""
    hs = dt.hour
    if(dt.hour < 10):
        hs = "0" + str(hs)


    s = s + str(dt.month) + "/" + str(dt.day) + " " + str(hs) + ":00"
    return s



# low_altitude_wind_ok = nogo.Condition(0, 11.5)



# go_nogo = nogo.LaunchConditions()
# go_nogo.add_cond(low_altitude_wind_ok)
#################

dataloader = util.stormglass.StormGlass(key_rotator)
if generate_new_data:
    dataloader.generate(location)
    dataloader.dump_file(file_name)

dataloader.load_file(file_name)


df: util.stormglass.StormGlassData = dataloader.get_dataframe()


# CONVERTING INTO READABLE JSON FOR WEBSITE
# UNCOMMENT TO GENERATE, CHANGE FILENAME TO APPROPRIATE


out_data = []
if generate_new_data:
    for ind, row in enumerate(df):
        print(ind)
        time = df[ind]['time']
        sg_alts, sg_speeds, _ = row.get_wind_gradient_raw()
        windy_alts, windy_speeds, _ = util.parse_windycom.get_gradient_raw()
        alts, speeds = util.interweave_data.interweave(sg_alts, windy_alts, sg_speeds, windy_speeds)
        alts = alts.tolist()
        formatted_time = (prettytime_full(utc_datetime(time).astimezone(tz)))
        datarow = {"x": alts, "y": speeds, "title": "Wind Speed (mph) vs Altitude (ft) at " + formatted_time}
        out_data.append(datarow)

windy = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 2.30156, 3.4523399999999995, 5.7539, 16.11092, 17.261699999999998, 11.5078, 11.5078, 20.714039999999997, 26.46794, 29.920279999999998, 33.37262, 34.523399999999995, 35.67418, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 2.30156, 3.4523399999999995, 5.7539, 16.11092, 17.261699999999998, 11.5078, 11.5078, 20.714039999999997, 26.46794, 29.920279999999998, 33.37262, 34.523399999999995, 35.67418, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 2.30156, 3.4523399999999995, 5.7539, 16.11092, 17.261699999999998, 11.5078, 11.5078, 20.714039999999997, 26.46794, 29.920279999999998, 33.37262, 34.523399999999995, 35.67418, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 8.05546, 6.904679999999999, 9.20624, 9.20624, 17.261699999999998, 14.960139999999999, 11.5078, 21.864819999999998, 29.920279999999998, 31.07106, 31.07106, 41.428079999999994, 36.82496, 25.317159999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 8.05546, 6.904679999999999, 9.20624, 9.20624, 17.261699999999998, 14.960139999999999, 11.5078, 21.864819999999998, 29.920279999999998, 31.07106, 31.07106, 41.428079999999994, 36.82496, 25.317159999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 8.05546, 6.904679999999999, 9.20624, 9.20624, 17.261699999999998, 14.960139999999999, 11.5078, 21.864819999999998, 29.920279999999998, 31.07106, 31.07106, 41.428079999999994, 36.82496, 25.317159999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 17.261699999999998, 13.809359999999998, 16.11092, 16.11092, 16.11092, 12.658579999999999, 13.809359999999998, 21.864819999999998, 32.22184, 40.2773, 43.729639999999996, 42.57886, 42.57886, 26.46794]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 17.261699999999998, 13.809359999999998, 16.11092, 16.11092, 16.11092, 12.658579999999999, 13.809359999999998, 21.864819999999998, 32.22184, 40.2773, 43.729639999999996, 42.57886, 42.57886, 26.46794]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 17.261699999999998, 13.809359999999998, 16.11092, 16.11092, 16.11092, 12.658579999999999, 13.809359999999998, 21.864819999999998, 32.22184, 40.2773, 43.729639999999996, 42.57886, 42.57886, 26.46794]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 21.864819999999998, 21.864819999999998, 17.261699999999998, 19.56326, 23.0156, 21.864819999999998, 20.714039999999997, 19.56326, 19.56326, 31.07106, 41.428079999999994, 31.07106, 36.82496, 36.82496, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 21.864819999999998, 21.864819999999998, 17.261699999999998, 19.56326, 23.0156, 21.864819999999998, 20.714039999999997, 19.56326, 19.56326, 31.07106, 41.428079999999994, 31.07106, 36.82496, 36.82496, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 21.864819999999998, 21.864819999999998, 17.261699999999998, 19.56326, 23.0156, 21.864819999999998, 20.714039999999997, 19.56326, 19.56326, 31.07106, 41.428079999999994, 31.07106, 36.82496, 36.82496, 27.618719999999996]]]
windy2 = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 3.4523399999999995, 3.4523399999999995, 5.7539, 12.658579999999999, 19.56326, 12.658579999999999, 10.357019999999999, 21.864819999999998, 26.46794, 29.920279999999998, 26.46794, 26.46794, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 3.4523399999999995, 3.4523399999999995, 5.7539, 12.658579999999999, 19.56326, 12.658579999999999, 10.357019999999999, 21.864819999999998, 26.46794, 29.920279999999998, 26.46794, 26.46794, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [3.4523399999999995, 5.7539, 3.4523399999999995, 3.4523399999999995, 5.7539, 12.658579999999999, 19.56326, 12.658579999999999, 10.357019999999999, 21.864819999999998, 26.46794, 29.920279999999998, 26.46794, 26.46794, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 8.05546, 8.05546, 9.20624, 10.357019999999999, 18.41248, 12.658579999999999, 12.658579999999999, 25.317159999999998, 26.46794, 29.920279999999998, 29.920279999999998, 37.975739999999995, 36.82496, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 8.05546, 8.05546, 9.20624, 10.357019999999999, 18.41248, 12.658579999999999, 12.658579999999999, 25.317159999999998, 26.46794, 29.920279999999998, 29.920279999999998, 37.975739999999995, 36.82496, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 8.05546, 8.05546, 9.20624, 10.357019999999999, 18.41248, 12.658579999999999, 12.658579999999999, 25.317159999999998, 26.46794, 29.920279999999998, 29.920279999999998, 37.975739999999995, 36.82496, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [14.960139999999999, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 17.261699999999998, 17.261699999999998, 13.809359999999998, 14.960139999999999, 25.317159999999998, 27.618719999999996, 31.07106, 37.975739999999995, 37.975739999999995, 39.12652, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [14.960139999999999, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 17.261699999999998, 17.261699999999998, 13.809359999999998, 14.960139999999999, 25.317159999999998, 27.618719999999996, 31.07106, 37.975739999999995, 37.975739999999995, 39.12652, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [14.960139999999999, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 17.261699999999998, 17.261699999999998, 13.809359999999998, 14.960139999999999, 25.317159999999998, 27.618719999999996, 31.07106, 37.975739999999995, 37.975739999999995, 39.12652, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 20.714039999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 23.0156, 20.714039999999997, 19.56326, 24.166379999999997, 21.864819999999998, 23.0156, 25.317159999999998, 26.46794, 37.975739999999995, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 20.714039999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 23.0156, 20.714039999999997, 19.56326, 24.166379999999997, 21.864819999999998, 23.0156, 25.317159999999998, 26.46794, 37.975739999999995, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [16.11092, 20.714039999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 23.0156, 20.714039999999997, 19.56326, 24.166379999999997, 21.864819999999998, 23.0156, 25.317159999999998, 26.46794, 37.975739999999995, 37.975739999999995, 24.166379999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 21.864819999999998, 12.658579999999999, 13.809359999999998, 18.41248, 29.920279999999998, 32.22184, 19.56326, 19.56326, 19.56326, 26.46794, 26.46794, 21.864819999999998, 35.67418, 36.82496, 31.07106]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 21.864819999999998, 12.658579999999999, 13.809359999999998, 18.41248, 29.920279999999998, 32.22184, 19.56326, 19.56326, 19.56326, 26.46794, 26.46794, 21.864819999999998, 35.67418, 36.82496, 31.07106]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 21.864819999999998, 12.658579999999999, 13.809359999999998, 18.41248, 29.920279999999998, 32.22184, 19.56326, 19.56326, 19.56326, 26.46794, 26.46794, 21.864819999999998, 35.67418, 36.82496, 31.07106]]]
final = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 4.60312, 4.60312, 4.60312, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 29.920279999999998, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 4.60312, 4.60312, 4.60312, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 29.920279999999998, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 4.60312, 4.60312, 4.60312, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 29.920279999999998, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 10.357019999999999, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 10.357019999999999, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 10.357019999999999, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 14.960139999999999, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 14.960139999999999, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 14.960139999999999, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 17.261699999999998, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 21.864819999999998, 21.864819999999998, 12.658579999999999, 17.261699999999998, 31.07106, 32.22184, 11.5078, 17.261699999999998, 20.714039999999997, 20.714039999999997, 20.714039999999997, 26.46794, 35.67418, 29.920279999999998, 34.523399999999995]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 21.864819999999998, 21.864819999999998, 12.658579999999999, 17.261699999999998, 31.07106, 32.22184, 11.5078, 17.261699999999998, 20.714039999999997, 20.714039999999997, 20.714039999999997, 26.46794, 35.67418, 29.920279999999998, 34.523399999999995]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 21.864819999999998, 21.864819999999998, 12.658579999999999, 17.261699999999998, 31.07106, 32.22184, 11.5078, 17.261699999999998, 20.714039999999997, 20.714039999999997, 20.714039999999997, 26.46794, 35.67418, 29.920279999999998, 34.523399999999995]]]
final2 = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 9.20624, 4.60312, 6.904679999999999, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 28.769499999999997, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 9.20624, 4.60312, 6.904679999999999, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 28.769499999999997, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [4.60312, 9.20624, 9.20624, 4.60312, 6.904679999999999, 19.56326, 25.317159999999998, 8.05546, 17.261699999999998, 24.166379999999997, 29.920279999999998, 28.769499999999997, 32.22184, 28.769499999999997, 37.975739999999995, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 8.05546, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 8.05546, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 8.05546, 9.20624, 10.357019999999999, 10.357019999999999, 12.658579999999999, 18.41248, 9.20624, 19.56326, 21.864819999999998, 32.22184, 33.37262, 34.523399999999995, 34.523399999999995, 35.67418, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 17.261699999999998, 14.960139999999999, 14.960139999999999, 16.11092, 18.41248, 17.261699999999998, 13.809359999999998, 21.864819999999998, 24.166379999999997, 26.46794, 35.67418, 34.523399999999995, 34.523399999999995, 36.82496, 23.0156]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 20.714039999999997, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 20.714039999999997, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [17.261699999999998, 24.166379999999997, 17.261699999999998, 17.261699999999998, 20.714039999999997, 26.46794, 26.46794, 14.960139999999999, 23.0156, 25.317159999999998, 25.317159999999998, 34.523399999999995, 33.37262, 32.22184, 36.82496, 29.920279999999998]]]
am646 = l2 = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 12.658579999999999, 6.904679999999999, 6.904679999999999, 9.20624, 20.714039999999997, 24.166379999999997, 10.357019999999999, 20.714039999999997, 26.46794, 29.920279999999998, 31.07106, 33.37262, 31.07106, 34.523399999999995, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 12.658579999999999, 6.904679999999999, 6.904679999999999, 9.20624, 20.714039999999997, 24.166379999999997, 10.357019999999999, 20.714039999999997, 26.46794, 29.920279999999998, 31.07106, 33.37262, 31.07106, 34.523399999999995, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 12.658579999999999, 6.904679999999999, 6.904679999999999, 9.20624, 20.714039999999997, 24.166379999999997, 10.357019999999999, 20.714039999999997, 26.46794, 29.920279999999998, 31.07106, 33.37262, 31.07106, 34.523399999999995, 20.714039999999997]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 14.960139999999999, 12.658579999999999, 13.809359999999998, 14.960139999999999, 18.41248, 9.20624, 18.41248, 24.166379999999997, 28.769499999999997, 32.22184, 32.22184, 32.22184, 36.82496, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 14.960139999999999, 12.658579999999999, 13.809359999999998, 14.960139999999999, 18.41248, 9.20624, 18.41248, 24.166379999999997, 28.769499999999997, 32.22184, 32.22184, 32.22184, 36.82496, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 14.960139999999999, 12.658579999999999, 13.809359999999998, 14.960139999999999, 18.41248, 9.20624, 18.41248, 24.166379999999997, 28.769499999999997, 32.22184, 32.22184, 32.22184, 36.82496, 21.864819999999998]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 18.41248, 14.960139999999999, 14.960139999999999, 17.261699999999998, 18.41248, 17.261699999999998, 12.658579999999999, 20.714039999999997, 21.864819999999998, 21.864819999999998, 31.07106, 32.22184, 31.07106, 34.523399999999995, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 18.41248, 14.960139999999999, 14.960139999999999, 17.261699999999998, 18.41248, 17.261699999999998, 12.658579999999999, 20.714039999999997, 21.864819999999998, 21.864819999999998, 31.07106, 32.22184, 31.07106, 34.523399999999995, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [13.809359999999998, 18.41248, 14.960139999999999, 14.960139999999999, 17.261699999999998, 18.41248, 17.261699999999998, 12.658579999999999, 20.714039999999997, 21.864819999999998, 21.864819999999998, 31.07106, 32.22184, 31.07106, 34.523399999999995, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [18.41248, 23.0156, 23.0156, 17.261699999999998, 20.714039999999997, 26.46794, 25.317159999999998, 12.658579999999999, 17.261699999999998, 18.41248, 21.864819999999998, 32.22184, 33.37262, 32.22184, 31.07106, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [18.41248, 23.0156, 23.0156, 17.261699999999998, 20.714039999999997, 26.46794, 25.317159999999998, 12.658579999999999, 17.261699999999998, 18.41248, 21.864819999999998, 32.22184, 33.37262, 32.22184, 31.07106, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [18.41248, 23.0156, 23.0156, 17.261699999999998, 20.714039999999997, 26.46794, 25.317159999999998, 12.658579999999999, 17.261699999999998, 18.41248, 21.864819999999998, 32.22184, 33.37262, 32.22184, 31.07106, 27.618719999999996]]]
sunday = [[[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 8.05546, 5.7539, 5.7539, 6.904679999999999, 16.11092, 16.11092, 4.60312, 16.11092, 29.920279999999998, 32.22184, 35.67418, 40.2773, 29.920279999999998, 31.07106, 19.56326]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 8.05546, 5.7539, 5.7539, 6.904679999999999, 16.11092, 16.11092, 4.60312, 16.11092, 29.920279999999998, 32.22184, 35.67418, 40.2773, 29.920279999999998, 31.07106, 19.56326]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 8.05546, 5.7539, 5.7539, 6.904679999999999, 16.11092, 16.11092, 4.60312, 16.11092, 29.920279999999998, 32.22184, 35.67418, 40.2773, 29.920279999999998, 31.07106, 19.56326]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 2.30156, 26.46794, 26.46794, 27.618719999999996, 27.618719999999996, 37.975739999999995, 36.82496, 27.618719999999996, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 2.30156, 26.46794, 26.46794, 27.618719999999996, 27.618719999999996, 37.975739999999995, 36.82496, 27.618719999999996, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 2.30156, 26.46794, 26.46794, 27.618719999999996, 27.618719999999996, 37.975739999999995, 36.82496, 27.618719999999996, 27.618719999999996]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 9.20624, 9.20624, 9.20624, 8.05546, 4.60312, 4.60312, 12.658579999999999, 19.56326, 23.0156, 28.769499999999997, 32.22184, 33.37262, 31.07106, 31.07106]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 9.20624, 9.20624, 9.20624, 8.05546, 4.60312, 4.60312, 12.658579999999999, 19.56326, 23.0156, 28.769499999999997, 32.22184, 33.37262, 31.07106, 31.07106]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 9.20624, 9.20624, 9.20624, 9.20624, 8.05546, 4.60312, 4.60312, 12.658579999999999, 19.56326, 23.0156, 28.769499999999997, 32.22184, 33.37262, 31.07106, 31.07106]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 16.11092, 12.658579999999999, 12.658579999999999, 14.960139999999999, 13.809359999999998, 12.658579999999999, 5.7539, 11.5078, 11.5078, 23.0156, 28.769499999999997, 29.920279999999998, 29.920279999999998, 21.864819999999998, 32.22184]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 16.11092, 12.658579999999999, 12.658579999999999, 14.960139999999999, 13.809359999999998, 12.658579999999999, 5.7539, 11.5078, 11.5078, 23.0156, 28.769499999999997, 29.920279999999998, 29.920279999999998, 21.864819999999998, 32.22184]], [[0, 330, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 16.11092, 12.658579999999999, 12.658579999999999, 14.960139999999999, 13.809359999999998, 12.658579999999999, 5.7539, 11.5078, 11.5078, 23.0156, 28.769499999999997, 29.920279999999998, 29.920279999999998, 21.864819999999998, 32.22184]]]
sunday2 = [[[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 11.5078, 9.20624, 9.20624, 9.20624, 9.20624, 14.960139999999999, 21.864819999999998, 5.7539, 5.7539, 29.920279999999998, 39.12652, 37.975739999999995, 37.975739999999995, 35.67418, 32.22184, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 11.5078, 9.20624, 9.20624, 9.20624, 9.20624, 14.960139999999999, 21.864819999999998, 5.7539, 5.7539, 29.920279999999998, 39.12652, 37.975739999999995, 37.975739999999995, 35.67418, 32.22184, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 11.5078, 9.20624, 9.20624, 9.20624, 9.20624, 14.960139999999999, 21.864819999999998, 5.7539, 5.7539, 29.920279999999998, 39.12652, 37.975739999999995, 37.975739999999995, 35.67418, 32.22184, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 8.05546, 6.904679999999999, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 12.658579999999999, 12.658579999999999, 17.261699999999998, 17.261699999999998, 39.12652, 44.880419999999994, 44.880419999999994, 47.181979999999996, 35.67418, 21.864819999999998]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 8.05546, 6.904679999999999, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 12.658579999999999, 12.658579999999999, 17.261699999999998, 17.261699999999998, 39.12652, 44.880419999999994, 44.880419999999994, 47.181979999999996, 35.67418, 21.864819999999998]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [9.20624, 8.05546, 6.904679999999999, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 12.658579999999999, 12.658579999999999, 17.261699999999998, 17.261699999999998, 39.12652, 44.880419999999994, 44.880419999999994, 47.181979999999996, 35.67418, 21.864819999999998]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 2.30156, 18.41248, 25.317159999999998, 35.67418, 35.67418, 35.67418, 41.428079999999994, 31.07106, 24.166379999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 2.30156, 18.41248, 25.317159999999998, 35.67418, 35.67418, 35.67418, 41.428079999999994, 31.07106, 24.166379999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 2.30156, 18.41248, 25.317159999999998, 35.67418, 35.67418, 35.67418, 41.428079999999994, 31.07106, 24.166379999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 4.60312, 2.30156, 14.960139999999999, 23.0156, 31.07106, 27.618719999999996, 40.2773, 39.1265, 31.07106, 31.07106]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 4.60312, 2.30156, 14.960139999999999, 23.0156, 31.07106, 27.618719999999996, 40.2773, 39.1265, 31.07106, 31.07106]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 5.7539, 4.60312, 2.30156, 14.960139999999999, 23.0156, 31.07106, 27.618719999999996, 40.2773, 39.1265, 31.07106, 31.07106]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 13.809359999999998, 13.809359999999998, 11.5078, 11.5078, 13.809359999999998, 12.658579999999999, 9.20624, 2.30156, 12.658579999999999, 21.864819999999998, 29.920279999999998, 36.82496, 36.82496, 25.317159999999998, 25.317159999999998, 35.67418]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 13.809359999999998, 13.809359999999998, 11.5078, 11.5078, 13.809359999999998, 12.658579999999999, 9.20624, 2.30156, 12.658579999999999, 21.864819999999998, 29.920279999999998, 36.82496, 36.82496, 25.317159999999998, 25.317159999999998, 35.67418]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [12.658579999999999, 13.809359999999998, 13.809359999999998, 11.5078, 11.5078, 13.809359999999998, 12.658579999999999, 9.20624, 2.30156, 12.658579999999999, 21.864819999999998, 29.920279999999998, 36.82496, 36.82496, 25.317159999999998, 25.317159999999998, 35.67418]]]
sunday3 = [[[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 11.5078, 8.05546, 6.904679999999999, 8.05546, 8.05546, 12.658579999999999, 18.41248, 8.05546, 4.60312, 28.769499999999997, 34.523399999999995, 34.523399999999995, 36.82496, 34.523399999999995, 34.523399999999995, 19.56326]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 11.5078, 8.05546, 6.904679999999999, 8.05546, 8.05546, 12.658579999999999, 18.41248, 8.05546, 4.60312, 28.769499999999997, 34.523399999999995, 34.523399999999995, 36.82496, 34.523399999999995, 34.523399999999995, 19.56326]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [8.05546, 11.5078, 8.05546, 6.904679999999999, 8.05546, 8.05546, 12.658579999999999, 18.41248, 8.05546, 4.60312, 28.769499999999997, 34.523399999999995, 34.523399999999995, 36.82496, 34.523399999999995, 34.523399999999995, 19.56326]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 5.7539, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 11.5078, 5.7539, 14.960139999999999, 26.46794, 31.07106, 32.22184, 35.67418, 35.67418, 34.523399999999995, 20.714039999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 5.7539, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 11.5078, 5.7539, 14.960139999999999, 26.46794, 31.07106, 32.22184, 35.67418, 35.67418, 34.523399999999995, 20.714039999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 8.05546, 5.7539, 6.904679999999999, 6.904679999999999, 8.05546, 10.357019999999999, 11.5078, 5.7539, 14.960139999999999, 26.46794, 31.07106, 32.22184, 35.67418, 35.67418, 34.523399999999995, 20.714039999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 6.904679999999999, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 29.920279999999998, 23.0156, 28.769499999999997, 32.22184, 27.618719999999996, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 6.904679999999999, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 29.920279999999998, 23.0156, 28.769499999999997, 32.22184, 27.618719999999996, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [5.7539, 6.904679999999999, 6.904679999999999, 5.7539, 5.7539, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 29.920279999999998, 23.0156, 28.769499999999997, 32.22184, 27.618719999999996, 23.0156]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 24.166379999999997, 24.166379999999997, 27.618719999999996, 24.166379999999997, 21.864819999999998, 28.769499999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 24.166379999999997, 24.166379999999997, 27.618719999999996, 24.166379999999997, 21.864819999999998, 28.769499999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 6.904679999999999, 4.60312, 3.4523399999999995, 17.261699999999998, 24.166379999999997, 24.166379999999997, 24.166379999999997, 27.618719999999996, 24.166379999999997, 21.864819999999998, 28.769499999999997]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 11.5078, 11.5078, 11.5078, 13.809359999999998, 16.11092, 9.20624, 3.4523399999999995, 11.5078, 21.864819999999998, 21.864819999999998, 20.714039999999997, 18.41248, 21.864819999999998, 14.960139999999999, 35.67418]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 11.5078, 11.5078, 11.5078, 13.809359999999998, 16.11092, 9.20624, 3.4523399999999995, 11.5078, 21.864819999999998, 21.864819999999998, 20.714039999999997, 18.41248, 21.864819999999998, 14.960139999999999, 35.67418]], [[0, 330, 1000, 2000, 2500, 3000, 5000, 6400, 10000, 14000, 18000, 24000, 30000, 34000, 39000, 45000, 98000], [11.5078, 14.960139999999999, 11.5078, 11.5078, 11.5078, 13.809359999999998, 16.11092, 9.20624, 3.4523399999999995, 11.5078, 21.864819999999998, 21.864819999999998, 20.714039999999997, 18.41248, 21.864819999999998, 14.960139999999999, 35.67418]]]

for i in range(15):
    time = df[i + 2]['time']
    sg_alts, sg_speeds, _ = df[i + 2].get_wind_gradient_raw()
    windy_alts, windy_speeds = sunday3[i][0], sunday3[i][1]
    alts, speeds = util.interweave_data.interweave2(sg_alts, windy_alts, sg_speeds, windy_speeds)
    sg_speeds = [x * 2.23694 for x in sg_speeds]
    sg_alts = [x * 3.28084 for x in sg_alts]
    # plt.plot(alts, speeds, label = "Interweaved")
    # plt.plot(windy_alts, windy_speeds, label = "Windy")
    # plt.plot(sg_alts, sg_speeds, label = "Stormglass")
    # plt.legend(loc='upper right')
    # plt.xlabel("Altitude (ft)")
    # plt.ylabel("Wind speed (mph)")
    # plt.show()
    alts = alts.tolist()
    formatted_time = (prettytime_full(utc_datetime(time)))
    datarow = {"x": alts, "y": speeds, "title": "Wind Speed (mph) vs Altitude (ft) at " + formatted_time}
    out_data.append(datarow)


output_string = json.dumps(out_data)


with open("Wind-Model\my-app\src\main_data.json", "w") as f:
    f.write(output_string)

# DONE WITH JSON GENERATION

# ax = plt.figure().add_subplot(projection='3d')

max_winds = []
max_hl_winds = []
cc_l = []
pcp_l = []
gust_l = []

lc_ok = []
lc_mid = []

hours = len(df)

for ind, row in enumerate(df):
    a1, s1, d1 = row.get_wind_gradient_raw()
    a2, s2, d2 = grad_wdcom = util.parse_windycom.get_gradient_raw()
    # print(s2)
    # print("\n")
    a = a1
    s = s1
    # a, s = util.interweave_data.interweave(a1, a2, s1, s2, d1, d2)
    # print(s1, "\n", s2, "\n")
    # a = a2
    # s = s2

    high_alt_index = 0
    for i in range(len(a)):
        if a[i] >= 3000:
            high_alt_index = i
            break
    
    cc = row.cloud_cover()
    pcp = row.precipitation()
    gusts = row.gusts()

    max_wind = -1
    for i in range(high_alt_index):
        if s[i] > max_wind:
            max_wind = s[i]

    max_ha_wind = -1
    for i in range(high_alt_index, len(s)):
        if s[i] > max_ha_wind:
            max_ha_wind = s[i]

    max_winds.append(max_wind)
    max_hl_winds.append(max_ha_wind)

    cc_l.append(cc)
    pcp_l.append(pcp)
    gust_l.append(gusts)

    # launch states
    good = max_wind < 20 and max_ha_wind < 35 and cc < 50 and pcp < 0.5 and gusts < 20
    mid = max_wind < 30 and max_ha_wind < 45 and cc < 65 and pcp < 1 and gusts < 30

    lc_ok.append(good)
    lc_mid.append(mid)



    # Launch condition check


ts = [prettytime(utc_datetime(df[h]['time']).astimezone(tz)) for h in range(hours)]
ts = [i for i in range(hours)]
# plt.plot(ts, max_winds, label='Low altitude wind (m/s)')
# plt.plot(ts, max_hl_winds, label = "High altitude wind (m/s)")
# plt.plot(ts, cc_l, label="Cloud cover (%)")
# plt.plot(ts, pcp_l, label="Precipitation (mm/hr)")
# plt.plot(ts, gust_l, label="Ground level Gusts (m/s)")

# plt.xlabel(f"Time (Hours since {prettytime_full(utc_datetime(df[0]['time']).astimezone(tz))})")
# plt.ylabel("Parameter value (varied)")
# plt.legend(loc='upper right')

# # plt.vlines((6*24)+23 ,0,100,linestyles='dashed',colors='black')
# # plt.vlines((7*24)+0 ,0,100,linestyles='solid',colors='red')

# # plt.fill_between(range(hours), 0, 100, where=lc_bad, facecolor='red', alpha=.1)
# plt.fill_between(range(hours), 0, 100, where=lc_mid, facecolor='yellow', alpha=.3)
# plt.fill_between(range(hours), 0, 100, where=lc_ok, facecolor='green', alpha=.3)


# ax.set_xlabel("Altitude (m)")
# ax.set_ylabel("Wind speed (m/s)")
# ax.set_zlabel("Hour")

# plt.show()


############################################
# testing interweave
# alt, speed = util.interweave_data.interweave(a1, a2, s1, s2, d1, d2)
inter_alt, inter_speed= util.interweave_data.interweave(a1, a2, s1, s2)
a1 = [x * 3.28084 for x in a1]
a2 = [x * 3.28084 for x in a2]
s1 = [x * 2.23694 for x in s1]
s2 = [x * 1.15078 for x in s2]
plt.plot(inter_alt, inter_speed, label = "Interweaved")
plt.plot(a1, s1, label = "Stormglass")
plt.plot(a2, s2, label = "Windy")
# plt.plot(alt, speed, label = "Interweaved")
plt.legend(loc='upper right')
# print(max(a1))
# print(max(a2))
plt.xlabel("Altitude (ft)")
plt.ylabel("Wind speed (mph)")
# plt.show()
# plt.savefig("interweave.png", bbox_inches='tight')